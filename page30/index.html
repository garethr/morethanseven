<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      More than seven &middot; Gareth Rushgrove
    
  </title>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-435455-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
   <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=morethansevennet" id="_carbonads_js"></script>

   <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          More than seven
        </a>
      </h1>
      <p class="lead">Writing about code. Occasional other topics. Made by <a href="https://twitter.com/garethr">@garethr</a>.</p>
    </div>
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2009/03/19/webapp-custom-filters/">
        Webapp custom filters
      </a>
    </h1>

    <span class="post-date">19 Mar 2009</span>

    <p>The webapp framework wish ships with App Engine uses the Django templating system by default, but without Django apps doesn&#8217;t support the same mechanism for loading template tags and filters. <a href="http://javawonders.blogspot.com/2009/01/google-app-engine-templates-and-custom.html">This is how to do it though</a> using a few webapp.template methods.</p>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2009/03/18/simple-wsgi-middleware-app-engine/">
        Simple WSGI Middleware (for App Engine)
      </a>
    </h1>

    <span class="post-date">18 Mar 2009</span>

    <blockquote>
<p><span class="caps">WSGI</span> is the Web Server Gateway Interface. It is a specification for web servers and application servers to communicate with web applications (though it can also be used for more than that). It is a Python standard, described in detail in <a href="http://www.python.org/dev/peps/pep-0333/"><span class="caps">PEP</span> 333</a>.</p>
</blockquote>
<p>For Ruby people <span class="caps">WSGI</span> is the <a href="http://rack.rubyforge.org/">Rack</a> in Python. In fact it was one of the inspirations behind Rack. Rack descriptions itself as:</p>
<blockquote>
<p>Rack provides an minimal interface between webservers supporting Ruby and Ruby frameworks.</p>
</blockquote>
<p>Which I think is a clearer explanation, except in WSGI&#8217;s case we replace Ruby with Python.</p>
<p>As well as being able to write <span class="caps">WSGI</span> middleware for Django or Pylons we can also write <span class="caps">WSGI</span> middleware for App Engine applications &#8211; which is what I spent some time doing today. For the most part I found the examples and documentation interesting but overkill for what I needed to do. Specifically I wanted a piece of middleware which modified the response content, adding extra content into the response. Most of the examples I found didn&#8217;t focus on middleware, or where full blown examples making them hard to follow.</p>
<p>So for anyone looking for a simple example of <span class="caps">WSGI</span> middleware which adds content into the response here goes. I used the <a href="http://pythonpaste.org/webob/">WebOb</a> framework because it provides a nicer interface to the request and response objects and it&#8217;s included in the standard App Engine <span class="caps">SDK</span>. The following sample middleware simple adds <em>Hello World</em> to the end of every response.</p>
<pre>from webob import Request
class SimpleMiddleware(object):
    "Example middleware that appends a message to all 200 html responses"    
    def __init__(self, app):
        self.app = app
    def __call__(self, environ, start_response):       
        # deal with webob request and response objects
        # due to a nicer interface
        req = Request(environ)
        resp = req.get_response(self.app)
        # add a string to the end of the body
        body = resp.body + "Hello World"
        # set the body to the new copy
        resp.body = body
        return resp(environ, start_response)</pre>
<p>In reality you might want to append something to a specific place in the response, or introduce conditionals. This is easy enough to do by parsing the initial value of <em>resp.body</em> in the example above.</p>
<p>To use the middleware in your application you simple wrap your current WSGIApplication instance with the middleware class.</p>
<pre>application = webapp.WSGIApplication(ROUTES, debug=settings.DEBUG)
# add simple middleware
application = SimpleMiddleware(application)
run_wsgi_app(application)</pre>
<p><span class="caps">WSGI</span> middleware is both a useful place for common functionality to live in your App Engine application as well as being a handy tool for anyone working across multiple Python frameworks to share code.</p>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2009/03/14/xmpp-and-queues-app-engine-jaiku-not-quite-yet/">
        XMPP and Queues in App Engine via Jaiku? Not quite yet
      </a>
    </h1>

    <span class="post-date">14 Mar 2009</span>

    <p>So <a href="http://code.google.com/p/jaikuengine">JauikuEngine</a>, the open source, App Engine based, version of Jaiku is now available for everyone to look at. I <a href="http://twitter.com/garethr/status/1321372099">found the repo a couple of days ago</a> but it was restricted to project members. The main reason I want to hunt through the code is to have a look at what I&#8217;m guessing will be API&#8217;s available in a soon to be released version of App Engine &#8211; with specific interest in anything to do with <span class="caps">XMPP</span>, queues and offline processing.</p>
<p>Well it looks like I&#8217;m out of luck for the moment at least. In the <a href="http://code.google.com/p/jaikuengine/source/browse/trunk/settings.py">settings file</a> I found the following two snippets though:</p>
<pre>#
# XMPP / IM
#
# Enabling IM will require a bit more than just making this True, please
# read the docs at http://code.google.com/p/jaikuengine/wiki/im_support
IM_ENABLED = False
# This is the id (JID) of the IM bot that you will use to communicate with
# users of the IM interface
IM_BOT = 'root@example.com'
# Turn on test mode for IM
IM_TEST_ONLY = False
# JIDs to allow when testing live XMPP so you don't spam all your users
IM_TEST_JIDS = []</pre>
<p>And another for queues:</p>
<pre>#
# Task Queue
#
# Enabling the queue will allow you to process posts with larger numbers
# of followers but will require you to set up a cron job that will continuously
# ping a special url to make sure the queue gets processed
QUEUE_ENABLED = True
# The secret to use for your cron job that processes your queue
QUEUE_VENDOR_SECRET = 'SECRET'</pre>
<p>The only problem appears to be that the page referenced, <a href="http://code.google.com/p/jaikuengine/wiki/im_support">code.google.com/p/jaikuengine/wiki/im_support</a>, currently says:</p>
<blockquote>
<p><acronym title="termie"><span class="caps">TODO</span></acronym>: describe how to get IM working with Jaiku Engine</p>
</blockquote>
<p>So <a href="http://twitter.com/termie">termie</a>, or anyone else on the inside, I&#8217;d love to know how to get this up and running?</p>
<p>I&#8217;ll be having a better look through the code when I get a chance. This was just the first thing I jumped on before heading out the door. I love Open Source.</p>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2009/03/13/does-rails-encourage-soa-better-than-django/">
        Services Vs Applications: Does Rails Encourage SOA Better Than Django?
      </a>
    </h1>

    <span class="post-date">13 Mar 2009</span>

    <p>Building larger applications tends to mean splitting your codebase up some how into manageable chunks. I&#8217;m quite interested in what I see as different approaches in the Rails and Django communities:</p>
<p>Django tends to recommend building <a href="http://www.b-list.org/weblog/2007/mar/27/reusable-django-apps/">Reusable Apps</a> and we have sites like <a href="http://djangoplugables.com/">Django Pluggables</a> to catalog what&#8217;s available. You then grab a few of these applications from the web or write your own, add them run them all together as part of a single application. <a href="http://pinaxproject.com/">Pinax</a> is probabaly the poster child for this approach. The  0.5.1 release for instance appears to have 41 individual reusable apps, many written by other people and projects.</p>
<p>The Rails community tends to <a href="http://gilesbowkett.blogspot.com/2007/08/activeresource-rails-scalability.html">talk more about RESTful service orientated architectures</a>, with things like <a href="http://api.rubyonrails.org/classes/ActiveResource/Base.html">ActiveResource</a> making this sort of thing easier. So rather than your manageable chunks being within your application they&#8217;re separate instances in their own right.</p>
<p>I&#8217;d be interested in hearing from more people about their experiences, in particular if you&#8217;ve gone against the grain so to speak.</p>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2009/03/13/app-engine-remote-api-calls/">
        App Engine Remote API calls
      </a>
    </h1>

    <span class="post-date">13 Mar 2009</span>

    <p>Not sure how I missed this but apparently App Engine (as of 1.1.9) supports <a href="http://code.google.com/appengine/articles/remote_api.html">remote access to your live data store</a>. This means you can create administration applications more easily by running them locally, rather than within the limitations of the live platform. You can even run a local python prompt with access to your live datastore which is pretty neat.</p>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page31">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page29">Newer</a>
    
  
</div>
    </div>

  </body>
</html>
