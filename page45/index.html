<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      More than seven &middot; Gareth Rushgrove
    
  </title>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-435455-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
   <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=morethansevennet" id="_carbonads_js"></script>

   <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          More than seven
        </a>
      </h1>
      <p class="lead">Writing about code. Occasional other topics. Made by <a href="https://twitter.com/garethr">@garethr</a>.</p>
    </div>
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2008/03/02/generating-charts-using-google-charts-api/">
        Generating Charts using Google Charts API
      </a>
    </h1>

    <span class="post-date">02 Mar 2008</span>

    <p>I had need recently to produce some nice looking charts and immediately turned to the very nice <a href="http://code.google.com/apis/chart/">Google Charts <span class="caps">API</span></a>. Just before Christmas <a href="http://suda.co.uk">Brian</a> had written up <a href="http://24ways.org/2007/tracking-christmas-cheer-with-google-charts">a great introduction</a> on <a href="http://24ways.org">24ways</a> and ever since I&#8217;d been looking for an excuse.</p>
<p><a href="http://www.wait-till-i.com">Chris</a> wrote up a pretty nice approach to <a href="http://www.wait-till-i.com/2008/01/08/generating-charts-from-accessible-data-tables-using-the-google-charts-api/">enhancing well marked up data tables</a> using the Charts <span class="caps">API</span> with a dash of Javascript and I decided to start with that. I made only a couple of changes to this approach based on personal requirements and preferences.</p>
<p>For a table like this:</p>
<table class="tochart">
  <caption>Caption</caption>  
<tr>
    <th scope="row">Label</th>
    <td>Data</td>
</tr>
<tr>
    <th scope="row">Label</th>
    <td>Data</td>
</tr>
</table>
<p>I prefer to use the table header element to mark up the table row and the original script relied on these being <em>td</em> elements. A couple of changes to the javascript fixed that. I also decided to display the <em>caption</em> as a title on the resulting graph.</p>
<pre><code>
&lt;table class="tochart"&gt;
  &lt;caption&gt;Caption&lt;/caption&gt;  
  &lt;tr&gt;
    &lt;th scope="row"&gt;Label&lt;/th&gt;
    &lt;td&gt;Data&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;th scope="row"&gt;Label&lt;/th&gt;
    &lt;td&gt;Data&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
</code></pre>
<p>The original script only supported the 3D pie charts and in a couple of cases I wanted to generate bar-charts from the data or flat pie-charts. A few modifications later and you can pass a type parameter into the script via a class on the table.</p>
<p>The default if the parameter isn&#8217;t set is the flat pie-chart, which can also be specified via:</p>
<pre><code>&lt;table class="tochart typep"&gt;</code></pre>
<p>For the 3D pie-chart:</p>
<pre><code>&lt;table class="tochart typep3"&gt;</code></pre>
<p>The horizontal bar-chart is created with:</p>
<pre><code>&lt;table class="tochart typebhg"&gt;</code></pre>
<p>And finally the vertical bar-chart is set based on:</p>
<pre><code>&lt;table class="tochart typebvg"&gt;</code></pre>
<p>The complete modified version of Chris&#8217; script is below:</p>
<pre><code>(table2graph = function(){

  /* variables */
  var triggerClass = 'tochart';
  var chartClass = 'fromtable';
  var hideClass = 'hidden';
  var chartColor = 'FFCC33';
  var chartSize = '900x300';
  var chartType = 'p';
  
  var toTableClass = 'totable';
  var tableClass = 'generatedfromchart';
  /* end variables */

  var tables = document.getElementsByTagName('table');
  var sizeCheck = /\s?size([^\s]+)/;
  var colCheck = /\s?color([^\s]+)/;
  var typeCheck = /\s?type([^\s]+)/;
  for(var i=0;tables[i];i++){
    var t = tables[i];
    var c = t.className;
    var data = [];
    var labels = []
    if(c.indexOf(triggerClass) !== -1){
      var size = sizeCheck.exec(c);
      size = size ? size[1] : chartSize;
      var col = colCheck.exec(c);
      col = col ? col[1] : chartColor;
      var type = typeCheck.exec(c);
      type = type ? type[1] : chartType;
      
      if (type == 'bhg') {
        var label = 'chxl=1:|';
      } else {
       var label = 'chl=';
      }
      
      var caption = t.getElementsByTagName('caption')[0].innerHTML;
      var charturl = 'http://chart.apis.google.com/chart?cht=' + type + '&amp;chtt=' + caption + '&amp;chxt=x,y&amp;chco=' + col + '&amp;chs=' + size + '&amp;chd=t:';
      t.className += ' '+ hideClass;
      var ths = t.getElementsByTagName('tbody')[0].getElementsByTagName('th');
      var tds = t.getElementsByTagName('tbody')[0].getElementsByTagName('td');
      for(var j=0;tds[j];j+=1){
        labels.push(ths[j].getElementsByTagName('em')[0].innerHTML.toLowerCase());
        data.push(tds[j].innerHTML);
      };
      var chart = document.createElement('img');
      chart.setAttribute('src',charturl+data.join(',') + '&amp;' + label + labels.join('|'));
      chart.setAttribute('alt',t.getAttribute('summary'));
      chart.className = chartClass;
      t.parentNode.insertBefore(chart,t);
    };
  };
  
  /* convert charts to tables */
  var charts = document.getElementsByTagName('img');
  for(var i=0;charts[i];i++){
    if(charts[i].className.indexOf(toTableClass) !== -1){
      var t = document.createElement('table');
      var tbody = document.createElement('tbody');
      var data = charts[i].getAttribute('src');
      var th,td,tr;
      var values = data.match(/chd=t:([^&amp;]+)&amp;?/)[1];
      var labels = data.match(/chl=([^&amp;]+)&amp;?/)[1];
      var l = labels.split('|');
      var v = values.split(',');
      for(var j=0;l[j];j++){
        tr = document.createElement('tr');
        th = document.createElement('th');
        th.appendChild(document.createTextNode(l[j]));
        th.setAttribute('scope','row');
        td = document.createElement('td');
        td.appendChild(document.createTextNode(v[j]));
        tr.appendChild(th);
        tr.appendChild(td);
        tbody.appendChild(tr);
      };
      t.appendChild(tbody);
      t.setAttribute('summary',charts[i].getAttribute('alt'));
      charts[i].parentNode.insertBefore(t,charts[i]);
      charts[i].setAttribute('alt','');
      t.className = tableClass;
    };
  };
}());</code></pre>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2008/02/24/thinking-digital/">
        Thinking Digital
      </a>
    </h1>

    <span class="post-date">24 Feb 2008</span>

    <p>I&#8217;m starting to get excited about <a href="http://thinkingdigital.co.uk">Thinking Digital</a>. But first a bit of back-story.</p>
<p>I started out making the trip to <a href="http://atmedia2005.co.uk/">@media 2005</a> and since then have been a regular attendee of more conferences than I can shake a stick at. Lets say I caught the conference bug. But most of those have been within the web standards community niche and more recently I&#8217;ve been looking further afield for conference kicks, party due to the eclectic nature of <a href="http://barcamp.org">BarCamp</a> style events. Anyone in that positions inevitably takes a fancy to going along to <a href="http://www.ted.com/"><span class="caps">TED</span></a>. The <em>only</em> problem is the fact it&#8217;s already booked up until 2010, costs $6,000 just to for a standard membership and is invite only.</p>
<p>This year the folks over at <a href="http://codeworks.net">Codeworks</a>, which is a regional body set up to help us North East digital folk develop an industry, are organising their very own full size conference. The <a href="http://thinkandadrink.com">Think and a Drink</a> events have been running for a number of years and I&#8217;ve spoken a few times on web related bits and pieces. But these are purposely local events mainly for members and tend to crop up at the rate of once a month. <a href="http://thinkingdigital.co.uk">Thinking Digital</a> is a full size, 400 person, conference being held in Newcastle between the 21st and 23rd of May this year covering a similar set of wide ranging themes to <span class="caps">TED</span>; technology, design, mobile plus a bit of philosophy and futurism thrown in for good measure.</p>
<p>Now this is good for a few reasons. Only one of which is I can see the venue out of my apartment window. Costing only Â£475 and being in the UK would be a couple of other reasons to get excited. As an aside; I&#8217;m helping out as a board member along with the likes of <a href="http://www.cubicgarden.com/">Ian Forrester</a> but I&#8217;d gladly pay my way if I wasn&#8217;t.</p>
<p>The real reason for the excitement though is the calibre of some of the speakers. Ray Kurzweil, Greg Dyke, Dan Lyons (a.k.a. Fake Steve Jobs), Matt Locke, Aubrey De Grey and Tara Hunt to name a few I&#8217;m particularly interested in. And remember folks, this is in Newcastle. Which for the few Londoners reading is a couple of hours North of you. On a train with free wifi even.</p>
<p>Now this might not be a web conference but I&#8217;m pretty interested in the take of the likes of Ray Kurzweil on the web and what will happen in the near future. I&#8217;m also interested in the types of people who will make the trip &#8211; which is really the reason for this post. As everyone knows, one of the best parts of any conference is the chance to chat with like-minded (and not so like-minded) folks. So, who fancies coming along?</p>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2008/02/21/sorry-but-the-flickr-api-isnt-rest/">
        Sorry, but the Flickr API isn&#39;t REST
      </a>
    </h1>

    <span class="post-date">21 Feb 2008</span>

    <p>After <a href="http://semanticcamp.tommorris.org">SemanticCamp</a> me and <a href="http://icepop.org/">Rey</a> popped in to see <a href="http://blog.whatfettle.com/">Paul</a> and everyone at <a href="http://www.osmosoft.com/">Osmosoft</a> towers. A good few interesting conversations ensued, including one about the difference between <a href="http://blog.whatfettle.com/2008/02/19/mashup-or-integration/">mashups and integration</a>. All good fun basically. <a href="http://simonmcmanus.com/">Simon</a> also had an <a href="http://simonmcmanus.com/2008/02/21/off-the-shelf-integration-in-enterprises/">interesting take on the topic</a> as well.</p>
<p>What has all this to do with the topic of this post? Well, Simon says:</p>
<blockquote>
<p>When compared to small RESTful APIs like flickr and twitter&#8230;</p>
</blockquote>
<p>Now I&#8217;m not really picking on Simon here, more that I&#8217;ve been meaning to write something on this topic for a while and this proved a good catalyst for a little rant.</p>
<p>The <a href="http://flickr.com">flickr</a> <a href="http://www.flickr.com/services/api/"><span class="caps">API</span></a> is pretty darn cool. But it&#8217;s not RESTful in pretty much any way you want to shake a stick at it. It&#8217;s a well designed <span class="caps">RPC</span> (remote procedure call) <span class="caps">API</span>. Now even flickr get this wrong. They even have <a href="http://www.flickr.com/services/api/response.rest.html">a page</a> which confuses the issue and makes <span class="caps">REST</span> out to be a response format based on <span class="caps">XML</span>. Bad flickr.</p>
<p><a href="http://www.flickr.com/services/api/request.rest.html">flickr states</a> that:</p>
<blockquote>
<p>The <span class="caps">REST</span> Endpoint <span class="caps">URL</span> is http://api.flickr.com/services/rest/</p>
</blockquote>
<p>This turns out to be completely against the whole RESTful principles. Lets try and explain. You can define most of what you want to do with an <span class="caps">API</span> with the use of nouns, verbs and content types. <span class="caps">REST</span> is based around limiting the set of verbs to those available in <span class="caps">HTTP</span>; for instance <span class="caps">GET</span>, <span class="caps">POST</span>, <span class="caps">PUT</span> and <span class="caps">DELETE</span>. For any given application or <span class="caps">API</span> you&#8217;ll also specify a set of content types (representations); for instance <span class="caps">HTML</span>, <span class="caps">JSON</span> or <span class="caps">XML</span>. All you get to play around with are the nouns, in the case of the web these are our URLs.</p>
<p>In a typical <span class="caps">RPC</span> style <span class="caps">API</span> you have one <span class="caps">URL</span> (like flickr does) which acts as the end point to which all calls are made. You then probably define a few functions which you can call. Lets look at a simple book example.</p>
<pre><code>getBook()
deleteBook()
createBook()
editBook()</code></pre>
<p>The RESTful way of designing this might look a little bit more like this:</p>
<pre><code>GET     /books/{book-id}
DELETE  /books/{book-id}
POST    /books
PUT     /books/{book-id}</code></pre>
<p>We mentioned content types or representations earlier. Lets say instead of the default response format we might want to get a <span class="caps">JSON</span> representation of a given book we might do something like the following.</p>
<pre><code>GET /books/{book-id}.json</code></pre>
<p>The advantages of using URLs as the <span class="caps">API</span> nouns in this way include more than just sane URLs for the site or application in question. The web is based around many of these architectural principles and that seemed to scale pretty well. The idea is that fell envisaged RESTful applications have an advantage here too. For me one of the real benefits of RESTful APIs are in the simplicity they bring to documentation. I already know the available verbs, all I need to know are the set of resource URLs and I can probably use <span class="caps">CURL</span> to work out the <span class="caps">REST</span> (sorry, bad pun).</p>
<p>This misunderstanding is pretty common. Even <a href="http://en.wikipedia.org/wiki/Representational_State_Transfer">WikiPedia</a> appreciates their is a problem:</p>
<blockquote>
<p>The difference between the uses of the term â€œRESTâ€ causes some confusion in technical discussions.</p>
</blockquote>
<p>This isn&#8217;t just pedantry on my part, well not quite. I&#8217;d recommend anyone involved in designing and architecting web sites read <a href="http://www.amazon.co.uk/RESTful-Web-Services-Leonard-Richardson/dp/0596529260">RESTful Web Services</a> as well as <a href="http://www.ics.uci.edu/~fielding/">Roy Fielding&#8217;s</a> <a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm">Architectural Styles and the Design of Network-based Software Architectures</a>. But if you just want to <em>get</em> the general principles and don&#8217;t fancy wading through technical documents then you have to read <a href="http://tomayko.com/articles/2004/12/12/rest-to-my-wife">How I Explained <span class="caps">REST</span> to My Wife</a> hilariously written by <a href="http://tomayko.com/">Ryan Tomayko</a>.</p>
<p>And remember, just because an <span class="caps">API</span> makes use of <span class="caps">HTTP</span> doesn&#8217;t make it RESTful. I&#8217;m looking at you <a href="http://twitter.com">twitter</a>.</p>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2008/02/19/invited-to-join-wasp/">
        Invited to Join WaSP
      </a>
    </h1>

    <span class="post-date">19 Feb 2008</span>

    <p>I had a great time at <a href="http://semanticcamp.tommorris.org/">SemanticCamp</a> over the weekend which was not too much of a surprise. What was a surprise was getting back home to find out that I&#8217;ve been invited to join the <a href="http://www.webstandards.org/">Web Standards Project</a> (WaSP) on the <a href="http://www.webstandards.org/action/edutf">Education Task Force</a>. I even have my <a href="http://www.webstandards.org/about/members/grushgrove/">own page</a>.</p>
<p>Thanks for inviting me guys. Anyone who has had the misfortune of having me present during a discussion of the current state of web education knows it&#8217;s one of my favourite subjects. Hopefully I can make myself useful around the place and help with getting a few things done. More on this when I know more but in the meantime feel free to pester me endlessly if you have a particular axe to grind.</p>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2008/02/13/example-of-the-yahoo-live-api/">
        Example of the Yahoo Live Api
      </a>
    </h1>

    <span class="post-date">13 Feb 2008</span>

    <p><a href="http://live.yahoo.com/">Yahoo! Live</a> launched recently along with a nice <a href="http://developer.yahoo.com/ylive/rest_api/">RESTful <span class="caps">API</span></a>. I&#8217;ve spoken before about the beauty of <span class="caps">REST</span> being in lowering the barrier to hacking and when I wanted a quick feature for Live it was simplicity itself to put together.</p>
<p>A few friends are using it far too much it seems, <a href="http://ben-ward.co.uk/">Ben</a> has 7.6 hours and <a href="http://simonjobling.com">Si</a> has already clocked up 15 hours. But for the most part I keep missing their no-doubt highly entertaining antics. One thing that Live misses I feel is a favourite users or previously viewed channels list. Basically I want to see which of my friends who use the service are broadcasting right now. Something like:</p>
<p><a href="http://morethanseven.net/presents/yahoolive/"><img src="http://img.skitch.com/20080213-q7ntrbip3rhwbkdbykuwt4an5.render.png" alt="Yahoo! Live Online"/></a></p>
<p>The <span class="caps">API</span> request we&#8217;re interested in is the <a href="http://developer.yahoo.com/ylive/rest_api/channel.html">/channel/<span class="caps">PERMALINK</span></a> method. This lets us get information about whether the user is broadcasting at the moment.</p>
<pre><code>&lt;?php
$api = 'http://api.live.yahoo.com/api/v1/channel';
$friends = array(
  'garethr',
  'benward',
  'sijobling'
);
$statuses = array();
foreach ($friends as $friend) { 
  $response = simplexml_load_file($api . '/' . $friend);
  $name = $response-&gt;name; 
  if ($response-&gt;broadcast) {
    $status = 'live';
  } else {
    $status = 'offline';
  }
  $statuses["$name"] = $status;
}
function displaylist($array) {
  $output = '';
  if (count($array) &gt;= 0) {
    $output .= '&lt;ul&gt;';
    foreach ($array as $key =&gt; $value) {
      $output .= "&lt;li class=\"$value\"&gt;";
      $output .= "&lt;a href=\"http://live.yahoo.com/$key\"&gt;";
      $output .= "$key&lt;/a&gt;";
      $output .= "&lt;span&gt;$value&lt;/span&gt;&lt;/li&gt;";
    }
    $output .= '&lt;/ul&gt;';
  }
  return $output;
}
echo displaylist($statuses);
?&gt;</code></pre>
<p>I&#8217;ll add a few more people to <a href="http://morethanseven.net/presents/yahoolive/">my list</a> when I discover other people using the service. If you have an account leave a comment. I&#8217;ve added a touch of javascript as well so as to avoid having to reload the page manually. This way I can loiter on my little aggregator until someone I know starts broadcasting and head over to Live for whatever Si has been spending 15 hours doing.</p>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page46">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page44">Newer</a>
    
  
</div>
    </div>

  </body>
</html>
