<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      More than seven &middot; Gareth Rushgrove
    
  </title>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-435455-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
   <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=morethansevennet" id="_carbonads_js"></script>

   <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          More than seven
        </a>
      </h1>
      <p class="lead">Writing about code. Occasional other topics. Made by <a href="https://twitter.com/garethr">@garethr</a>.</p>
    </div>
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2009/06/08/garethrushgrovecom-update/">
        garethrushgrove.com update
      </a>
    </h1>

    <span class="post-date">08 Jun 2009</span>

    <p>I&#8217;ve updated my vanity domain at <a href="http://garethrushgrove.com">garethrushgrove.com</a> with a bit of information in case anyone might be interested in my services.</p>
<p><img src="http://image-host.appspot.com/i/img?id=agppbWFnZS1ob3N0cgwLEgVJbWFnZRjDPgw" alt="my personal site"/></p>
<p>The short version is I&#8217;m on the lookout for future projects, probably of a freelance or contract basis but if it&#8217;s particularly interesting then maybe a full time position. Basically I&#8217;m in quite a nice position and able to wander about a bit looking for something cool to do.</p>
<p>If you reading this site then you know what floats my boat. Python, testing, automation, system design, maybe get into Ruby or another language properly, etc. I&#8217;d particularly like to help people get started with testing, continuous integration or automated deployment and the like.</p>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2009/06/05/cambridge-geek-night/">
        Cambridge Geek Night
      </a>
    </h1>

    <span class="post-date">05 Jun 2009</span>

    <p>It&#8217;s the first <a href="http://cambridgegeeknights.net/">Cambridge Geek Night</a> next week, on Wednesday the 10th to be precise. You can find more information on <a href="http://upcoming.yahoo.com/event/2735951/">Upcoming</a> or on the <a href="http://cambridgegeeknights.wordpress.com/">Cambridge Geek Night blog</a>. The event also has a <a href="http://twitter.com/camgeeknights">twitter feed</a> to keep up with goings on. If you&#8217;re in Cambridge you don&#8217;t want to miss the perfect combination of geeks and beer.</p>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2009/06/04/testing-wsgi-application-urltest/">
        Testing WSGI Application with Urltest
      </a>
    </h1>

    <span class="post-date">04 Jun 2009</span>

    <p>I found myself wanted something to make writing high level, functional tests for <span class="caps">WSGI</span> application easier and quicker. If I liked the term I&#8217;d call it a domain specific language for testing URLs. Basically I found myself writing a lot of tests like:</p>
<pre>def test_404_handler(self):  
    response = self.app.get('/does-not-exist', expect_errors=True)        
    self.assertEquals("404 Not Found", response.status)</pre>
<p>Testing more than a view URLs like this got boring quickly. What I wanted was a short hand syntax for defining this sort of simple test and then running them all individually. So was born <a href="http://github.com/garethr/urltest/tree/master">Urltest</a>. It uses the rather nifty <a href="http://pypi.python.org/pypi/WebTest/0.9">Webtest</a> module and hooks into unittest from the standard library. You&#8217;re test script then looks a little like:</p>
<pre>#!/usr/bin/env python
from example_app import application
from urltest import verify_urls
if __name__ == "__main__":
    urls = (
        {'url':"/", 'code':200},
        {'url':"/bob", 'code':200},
        {'url':"/jim", 'code':404},
        {'url':"/jim", 'method': "POST", 'code':405},
    )    
    verify_urls(urls, application)</pre>
<p>Let me know if you use it as at the moment this is <em>works for me</em> ware, although it&#8217;s reasonably well tested and commented.</p>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2009/05/28/another-glue-python-framework-mnml/">
        Another Glue Python Framework - MNML
      </a>
    </h1>

    <span class="post-date">28 May 2009</span>

    <p>Although still a big fan of Django, but for some problems I&#8217;m finding more and more cases where I prefer less code and more freedom. My biggest issue for some types of problems being Django&#8217;s assumption that you&#8217;ll be using a relational database, or a database at all. Django wasn&#8217;t the reason I started using webapp for App Engine stuff, but in doing so I found that webapp often did all that I needed.</p>
<p>So when I small, non appengine project cropped up I started looking at the <a href="http://wiki.python.org/moin/WebFrameworks">different options available</a> and played with a few of them.</p>
<ul>
	<li>I played with Pylons but again got lost in code. I&#8217;ll probably play with Pylons more in the future and for bigger, team based, projects it looks a good mix of component parts and shared conventions.</li>
	<li>Web.py &#8211; I&#8217;d used web.py before I started with Django (I even wrote a very <a href="http://morethanseven.net/2007/01/03/webphp/">basic <span class="caps">PHP</span> clone</a>) and although I still like somethings about it, it felt like more code than was required for what I wanted.</li>
	<li><a href="http://github.com/breily/juno/tree/master">Juno</a> is similar in design to Sinatra but again it wasn&#8217;t really what I was after this time. I prefer separating my routing from my code and I&#8217;m not sure I like that it comes with it&#8217;s own templating engine.</li>
	<li><a href="http://github.com/JaredKuolt/newf/tree/master">Newf</a> was more like it. Basically a hugely stripped down <span class="caps">WSGI</span> framework which provides the very basic building blocks. Something to build on perhaps?</li>
	<li><a href="http://github.com/bradleywright/mnml/tree/master"><span class="caps">MNML</span></a> (by an ex-colleague <a href="http://intranation.com/">Brad Wright</a>) is build atop Newf adding a few more features and cleaning up some of the interfaces. My only problems here were that I prefer regex based routes and wanted individual methods for each <span class="caps">HTTP</span> verb. The former was a specific design decision Brad had made in order to be able to reverse routes, the later was on the todo list.</li>
</ul>
<p>So, I set <a href="http://github.com/garethr/mnml/tree/master">about forking <span class="caps">MNML</span> to create my own branch</a>. I added extra comments as I was making my way through the code, wrote a few tests to checks thinks worked and allowed for pluggable routing mechanisms. <span class="caps">MNML</span> applications look a bit like the following:</p>
<pre>from mnml import RegexBasedApplication, RequestHandler, HttpResponse, development_server
class HelloWorld(RequestHandler):
    def GET(self):
        return HttpResponse("&lt;h1&gt;Hello World&lt;/h1&gt;")
routes = (
    (r'^/$', HelloWorld),
)
application = RegexBasedApplication(routes)
if __name__ == '__main__':
    development_server(application)</pre>
<p>If you want to use the token based routing you would substitute in something like the following:</p>
<pre>routes = (
    ('/', Foo),
    ('/myview/:stuff/', Bar)
)
application = TokenBasedApplication(routes)</pre>
<p>The best bit is that it&#8217;s only about 350 lines of code, a great deal of which is accounted for by comments. It&#8217;s also really quite fast &#8211; especially using something like spawning to run the <span class="caps">WSGI</span> application. The other thing I like is the ease with which you can add <span class="caps">WSGI</span> middleware into the mix.</p>
<p>So, if you have a small scale problem where simple and fast beats everything else then have a look and let me know what you think. It will take less time to read the code and tests than it will be read the introductory chapter on whichever larger framework you choose to look at.</p>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2009/05/25/beyond-basic-web-development/">
        Beyond Basic Web Development
      </a>
    </h1>

    <span class="post-date">25 May 2009</span>

    <p>I did a talk at the recent barcamp North East on web development tools. Specifically I wanted to talk about the fact that an awful lot of people just use the basic stack of tools they are familiar with. So Microsoft people will just use C#, <span class="caps">MSSQL</span> and <span class="caps">ISS</span> and lots of people just use <span class="caps">PHP</span>, MySQL and Apache. I&#8217;m not saying their is anything wrong with those tools, but if they are all you have in your tool box you&#8217;re limited how well designed your software can be.</p>
<p><object style="margin:0px" width="425" height="355"><param name="movie" value="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=beyondbasicwebdev-090525052654-phpapp02&stripped_title=beyond-basic-web-development" /><param name="allowFullScreen" value="true"/><param name="allowScriptAccess" value="always"/><embed src="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=beyondbasicwebdev-090525052654-phpapp02&stripped_title=beyond-basic-web-development" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="425" height="355"></embed></object></p>
<p>I&#8217;d knocked the presentation together in my hotel room pretty quickly before heading down to barcamp and the lack of an internet connection meant I didn&#8217;t have links and didn&#8217;t cover a few tools I should have. It did seem to have the desired result in any case as several people spoke to me afterwards about wanting to use one of the tools I mentioned for something specific.</p>
<ul>
	<li><a href="http://www.danga.com/memcached/">Memcached</a></li>
	<li>Non relational databases (<a href="http://hadoop.apache.org/hbase/">Hbase</a>, <a href="http://couchdb.apache.org/">Couchdb</a>)</li>
	<li><a href="http://tokyocabinet.sourceforge.net/tyrantdoc/">Tokyo Tyrant</a></li>
	<li><a href="http://httpd.apache.org/docs/2.0/programs/ab.html">Apache Bench</a></li>
	<li><a href="http://integrityapp.com/">Continuous Integration</a></li>
	<li><a href="http://djangoproject.com/">Django</a> (specifically for nearly free admin interfaces)</li>
	<li>Small web servers &#8211; <a href="http://nginx.net/">Nginx</a>, <a href="http://code.macournoyer.com/thin/">Thin</a> and <a href="http://pypi.python.org/pypi/Spawning/0.7">Spawning</a></li>
	<li>Message queues &#8211; <a href="http://www.rabbitmq.com/">RabbitMQ</a> and <a href="http://stompserver.rubyforge.org/">Stompserver</a></li>
	<li><span class="caps">HTTP</span> tools &#8211; <a href="http://www.apsis.ch/pound/">Pound</a>, <a href="http://varnish.projects.linpro.no/">Varnish</a> and <a href="http://www.squid-cache.org/">Squid</a></li>
	<li><a href="http://hadoop.apache.org/core/">Hadoop</a></li>
</ul>
<p>We also had a good discussion afterwards and people mentioned a few other tools.</p>
<ul>
	<li><a href="http://reductivelabs.com/products/puppet/">Puppet</a></li>
	<li><a href="http://www.nagios.org/">Nagios</a></li>
	<li><a href="http://ganglia.info/">Ganglia</a></li>
	<li><a href="http://www.mortbay.org/jetty/">Jetty</a></li>
	<li><a href="http://lucene.apache.org/solr/">Solr</a></li>
</ul>
<p>Now it&#8217;s possible to spend too much time playing with small tools that are likely to be peripheral to the bulk of your application. But the number of stories I&#8217;ve head of people writing their own messages queuing systems in <span class="caps">PHP</span>, or using PHPMyAdmin as an application admin interface or ignoring the fact that their fancy new application only supports a few people at once.</p>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page28">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page26">Newer</a>
    
  
</div>
    </div>

  </body>
</html>
