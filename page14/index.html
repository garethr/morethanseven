<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      More than seven &middot; Gareth Rushgrove
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
   <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=morethansevennet" id="_carbonads_js"></script>

   <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          More than seven
        </a>
      </h1>
      <p class="lead">Writing about code mainly. Occasional other topics. Made by <a href="https://twitter.com/garethr">@garethr</a>.</p>
    </div>
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/vagrant/2010/12/24/A-vagrant-ecosystem/">
        A Vagrant Ecosystem
      </a>
    </h1>

    <span class="post-date">24 Dec 2010</span>

    <p>As mentioned loudly and repeatedly on here and on Twitter I love <a href="http://vagrantup.com">vagrant</a>. While writing a chef cookbook to bootstrap my virtual machines I started thinking about how things around vagrant could help it be more useful. These might be things I&#8217;m going to do, or ideally get involved with others to do. If anyone has any other ideas, or suggestions please leave comments, I definately think this is the time for discussion.</p>
<h2>Baseboxes</h2>
<p>I don&#8217;t really want to have to maintain baseboxes but I want access to lots of them. I&#8217;m sure some people will want a <em>Ruby on Rails in a box</em> but all I really care about is having access to recent 32 and 63 bit vanilla linux distributions. I want a good source for trusted baseboxes. At the moment the approach is to look on the wiki, then look on the mailing list and then search the web, then create your own (even using <a href="https://github.com/jedi4ever/veewee">VeeWee</a> it&#8217;s still a little fiddly). I&#8217;ve managed to find good lucid, maverick and debian boxes, but have had problems with centos and a few others. Part of this is the rate of change recenty of both vagrant and now VirtualBox (both good things), part of it is the lack of reviews and shared experiences around baseboxes.</p>
<p>What I&#8217;d love to see is a single place where anyone can post a link to a basebox and vagrant users can come along and assign metadata about whether it worked and on what hardware, vagrant version, virtual box version, etc. It could even act as a tracker, counting downloads of boxes to gauge popularity.</p>
<h2>Templated Vagrantfiles</h2>
<p>As mentioned previously I have a chef cookbook I use to bootstrap all my new virtual machines. My process is therefore: <em>vagrant init</em>, make some manual changes to the Vagrantfile (or copy it from elsewhere), <em>vagrant up</em>. I&#8217;m lazy and want a nicer way to reuse Vagrantfiles or to script their creation.</p>
<p>I started out thinking that the ability to point the init command at a template and to provide context on the command line might be a good idea. Now I&#8217;m wondering whether we just need a command line application which allows for writing or modifying the Vagrantfile? Something like:</p>
<pre>vagrant config vm.provisioner=:chef_solo
vagrant config chef.recipe_url=http://cloud.github.com/downloads/garethr/chef-repo/cookbooks.tar.gz</pre>
<h2>Hosted cookbooks</h2>
<p>I dissed the idea of a <em>Ruby on Rails in a box</em> basebox above but I still want to be able to let people more easily share custom configuration for specialist applications. But what I&#8217;d prefer would be people sharing packaged cookbooks, a bit like I&#8217;ve done for my default virtual machine setup. Again the beauty of this is it&#8217;s pretty much just sharing a <span class="caps">URL</span> to a tar.gz file. This makes more sense to me at least than random people connecting to my chef server (I shouldn&#8217;t know about their machines) and lowers the barrier to entry for those not interested in hosting their own chef server or using the opscode platform for local virtual machines.</p>
<p>I&#8217;m also not talking here about just sharing individual cookbooks like <a href="http://cookbooks.opscode.com/">cookbooks.opscode.com</a>, but rather a packaged collection of individual recipes designed for a specific purpose. A fully working solr instance, a django application server using apache/mod_wsgi, etc.</p>
<p>Many of the points about baseboxes above would work here too I think. Having a good community resource which points to lots of cookbook tar files. Allowing people to feed back about what works for them. I&#8217;ve mainly taked about Chef here as that&#8217;s what vagrant initially shipped with, with the puppet provisioner now ready to go with would stand for puppet manifests too.</p>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/cucumber/jruby/sysadvent/2010/12/20/Smoke-testing-with-cucumber-on-sysadvent/">
        Smoke Testing With Cucumber On Sysadvent
      </a>
    </h1>

    <span class="post-date">20 Dec 2010</span>

    <p>I wrote a quick article last week for the excellent <a href="http://sysadvent.blogspot.com">sysadvent</a> advent calendar, <a href="http://sysadvent.blogspot.com/2010/12/day-17-smoke-testing-deployments-using.html">Smoke Testing Deployments with Cucumber</a> talks a bit more about using a few of my favourite tools to check whether a deployment just broke anything important.</p>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/java/jruby/glassfish/sinatra/2010/11/28/Sinatra-on-glassfish-example/">
        Sinatra On Glassfish Example
      </a>
    </h1>

    <span class="post-date">28 Nov 2010</span>

    <p>I magically turned into a Java developer last week for a bit when I had to do some integration with a <span class="caps">SOAP</span> based <span class="caps">API</span> that really really wanted me to write Java on client as well. That led me down the route of having a good look at Jruby (which I&#8217;ve used before, mainly for testing using celerity) and in particular how easy it was to use native Java classes in Jruby (very, very easy as it turns out).</p>
<p>All that meant I&#8217;ll probably end up writing a nice Jruby application in the not too distant future, and not knowing too much about running such a thing in a production environment I thought I&#8217;d take a quick look. I went with Glassfish as the application server for no other reason that it took my fancy. I&#8217;d definately be interested in hearing about any positive or negative experiences people may have with it or other similar servers. My quick look turned into running a tiny Sinatra application.</p>
<p>First install the required gems for our little experiment. You&#8217;ll obviously need jruby which is sort of the point, I&#8217;d recommend using <span class="caps">RVM</span> for that.</p>
<pre><code>gem install sinatra warbler</pre><p></code></p>
<p>Now create a sinatra app. OK, it could be any Ruby rack based application but I like Sinatra. First we need a rackup file.</p>
<pre><code># config.ru
require 'init'

set :run, false
set :environment, :production

run Sinatra::Application</pre><p></code></p>
<p>Now for our application itself.</p>
<pre><code># init.rb
require 'rubygems'
require 'sinatra'
get '/' do
  "Hello World!"
end</pre><p></code></p>
<p>Warble is the gem we&#8217;re going to use to create a <span class="caps">WAR</span> file, which is basically an all in one bundle of our application and it&#8217;s dependencies which we can deploy to a java application server.</p>
<pre><code># config/warble.rb
Warbler::Config.new do |config|
  config.dirs = %w(config)
  config.includes = FileList["init.rb"]
  config.gems += ["sinatra"]
  config.gems -= ["rails"]
  config.gem_dependencies = true
end</pre><p></code></p>
<p>Now we&#8217;re ready to generate our <span class="caps">WAR</span> file.</p>
<pre><code>warble</pre><p></code></p>
<p>This should create a file called sample.war or similar. Then just deploy that to your application server and away you go. I got this working very easily with Glassfish which seemed to be the recommended tool for such things. Installing Glassfish was time consuming but <a href="http://www.nabisoft.com/tutorials/glassfish/installing-glassfish-301-on-ubuntu">well documented here</a>. Uploading to Glassfish was done via the web interface for the moment. I just selected a Ruby project from the deployment drop down and uploaded the war file.</p>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/devops/devopsweekly/2010/11/21/Devops-weekly/">
        Devops Weekly
      </a>
    </h1>

    <span class="post-date">21 Nov 2010</span>

    <p>I&#8217;ve really been enjoying <a href="http://rubyweekly.com">Ruby Weekly</a> recently, it&#8217;s an email newsletter by <a href="http://peterc.org/">Peter Cooper</a> which brings the latest Ruby related news and articles to your inbox.</p>
<p>I have to admit to being sceptical at first about the format, I think I unsubscribed from most email newsletters many years ago, moving my reading to <span class="caps">RSS</span> and then Twitter. But I&#8217;ve actually found a regularly appearing email a great way to catch up with the goings on. A think the reasons for that change of heart are:</p>
<ul>
	<li>Their is simply more being written now that even a few years ago, and I&#8217;m interested in more topics.</li>
	<li>For a short time Hacker News solved this problem for me, but now it&#8217;s too high volume for me to subscribe and read everything.</li>
	<li>I now manage my email inbox pretty well, I&#8217;m not always at inbox zero but I can&#8217;t remember the last time it was over 20.</li>
	<li><span class="caps">RSS</span> is great, but it&#8217;s always a limited view unless you follow 1000s of feeds.</li>
	<li>Twitter is great but unless you read every tweet you&#8217;ll miss some important bit of new.s</li>
</ul>
<p>I think Ruby Weekly works because it&#8217;s collated by someone with taste. Peter spends a bit of time putting together a small number of high quality links so I don&#8217;t have to. With <a href="http://devopsweekly.com">Devops Weekly</a> I&#8217;m hoping to do the same for a different niche.</p>
<p><img src="http://image-host.appspot.com/i/img?id=agppbWFnZS1ob3N0cg0LEgVJbWFnZRjxqwEM"/></p>
<p>So head over to <a href="http://devopsweekly.com">devopsweekly.com</a> to sign up. I&#8217;m not 100% sure yet when the first issue will go out but expect it in the next few weeks, and after that I&#8217;ll try and get one issue out each week. Any ideas are more than welcome, as are any news or articles that you think should go in.</p>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/amazon/heroku/devops/2010/11/07/Books-for-people-interested-in-devops/">
        Books For People Interested In Devops
      </a>
    </h1>

    <span class="post-date">07 Nov 2010</span>

    <p>Before starting with FreeAgent I decided I should spend a bit more time with Ruby and set about building something I&#8217;d been thinking about for a while. I&#8217;ve just launched the first one of my related pet projects so thought I better link to it from here.</p>
<p><a href="http://devopsbooks.com"><img src="http://image-host.appspot.com/i/img?id=agppbWFnZS1ob3N0cg0LEgVJbWFnZRihnAEM"/></a></p>
<p><a href="http://devopsbooks.com">Devops Books</a> is exactly what it sounds like; a list of books that people interested in the whole devops concept should read. It&#8217;s not a complete list just yet and I&#8217;ll try and keep it up to date as new interesting books get released. Any suggestions to add to the list most welcome.</p>
<p>It gave me a proper excuse to use <a href="http://heroku.com">Heroku</a> which has been very pleasant. Under the hood it&#8217;s a very simple sinatra application using the Mustache template language. The majority of the code is a build script that pulls down information from the Amazon <span class="caps">API</span> and mixes it with my own content. It then creates a <span class="caps">JSON</span> document that is used as the basis for generating the pages. I love static generators and hand rolling your own for a particular domain is often worthwhile. It means I have the json already lying around if I want to make a <span class="caps">JSONP</span> style badge for instance.</p>
<p>I plan on using the code as a bit of learning tool. Try out some different testing approaches, maybe add in <span class="caps">GEOIP</span> detection, make some of the commands I&#8217;m running into Rake tasks, that sort of thing. Given how easy it will be to throw up little sites like this using the generator I have a few other similar things in mind too.</p>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page15">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page13">Newer</a>
    
  
</div>
    </div>

  </body>
</html>
